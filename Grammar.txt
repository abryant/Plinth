CompilationUnit = Imports | PackageKeyword QName Semicolon Imports | CompilationUnit CompoundTypeDef | CompilationUnit ClassTypeDef | CompilationUnit InterfaceTypeDef

Imports = epsilon | Imports ImportKeyword QName Semicolon | Imports ImportKeyword QName Dot Star Semicolon

QName = Name | QName Dot Name

ClassTypeDef = OptionalModifiers ClassKeyword Name ImplementsClause LBrace MemberList RBrace |
               OptionalModifiers ClassKeyword Name ExtendsKeyword QName ImplementsClause LBrace MemberList RBrace
CompoundTypeDef = OptionalModifiers CompoundKeyword Name LBrace MemberList RBrace
InterfaceTypeDef = OptionalModifiers InterfaceKeyword                              Name LBrace MemberList RBrace |
                   OptionalModifiers InterfaceKeyword ExtendsKeyword InterfaceList Name LBrace MemberList RBrace

ImplementsClause = epsilon | ImplementsKeyword InterfaceList
InterfaceList = QName | InterfaceList Comma QName

MemberList = epsilon |
             MemberList Initialiser |
             MemberList Field |
             MemberList Constructor |
             MemberList Method
Modifiers = AbstractKeyword             | Modifiers AbstractKeyword  |
            FinalKeyword                | Modifiers FinalKeyword     |
            ImmutableKeyword            | Modifiers ImmutableKeyword |
            MutableKeyword              | Modifiers MutableKeyword   |
            NativeKeyword               | Modifiers NativeKeyword    |
            SelfishKeyword              | Modifiers SelfishKeyword   |
            SinceSpecifier              | Modifiers SinceSpecifier   |
            StaticKeyword               | Modifiers StaticKeyword    |
            NativeKeyword StringLiteral | Modifiers NativeKeyword StringLiteral
OptionalModifiers = epsilon | Modifiers
Initialiser = Block | Modifiers Block
Field = Modifiers Type Name Semicolon |
        Modifiers Type Name Equals Expression Semicolon |
        Type Name Semicolon |
        Type Name Equals Expression Semicolon
Constructor = Modifiers ThisKeyword ParameterList ThrowsClause Block |
              ThisKeyword ParameterList ThrowsClause Block
Method = Modifiers Type        Name ParameterList ThrowsClause Block |
         Modifiers VoidKeyword Name ParameterList ThrowsClause Block |
                   Type        Name ParameterList ThrowsClause Block |
                   VoidKeyword Name ParameterList ThrowsClause Block |
         Modifiers Type        Name ParameterList ThrowsClause Semicolon |
         Modifiers VoidKeyword Name ParameterList ThrowsClause Semicolon |
                   Type        Name ParameterList ThrowsClause Semicolon |
                   VoidKeyword Name ParameterList ThrowsClause Semicolon

ParameterList = LParen Parameters RParen | LParen RParen
Parameters = OptionalModifiers Type Name | Parameters Comma OptionalModifiers Type Name

ThrowsClause = epsilon | ThrowsKeyword ThrowsList
ThrowsList = QName | UncheckedKeyword QName |
             ThrowsList Comma QName | ThrowsList Comma UncheckedKeyword QName

Block = LBrace Statements RBrace | LBrace RBrace

Statements = Statement | Statements Statement
Statement = Assignment | Block | BreakStatement | ContinueStatement | ForStatement | IfStatement | PrefixIncDecStatement | ReturnStatement | WhileStatement |
            ShorthandAssignment Semicolon |
            FunctionCallExpression Semicolon |
            CastKeyword LAngle Type RAngle FunctionCallExpression Semicolon |
            ClassCreationExpression Semicolon |
            ThisKeyword Arguments Semicolon | SuperKeyword Arguments Semicolon |
            ThrowKeyword Expression Semicolon

Assignee = AssigneeNoQName | QName
AssigneeNoQName = Primary         LSquare Expression RSquare |
                  QName           LSquare Expression RSquare |
                  NestedQNameList LSquare Expression RSquare |
                  PrimaryNoTrailingType Dot Name |
                  Type DoubleColon Name |
                  Underscore
AssigneeList = QName           Comma AssigneeList |
               AssigneeNoQName Comma AssigneeList |
               Assignee

DeclarationAssigneeList = Name | Underscore | DeclarationAssigneeList Comma Name | DeclarationAssigneeList Comma Underscore


Assignment = Modifiers TypeNoQName     DeclarationAssigneeList Semicolon | Modifiers TypeNoQName     DeclarationAssigneeList Equals Expression Semicolon |
                       TypeNoQName     DeclarationAssigneeList Semicolon |           TypeNoQName     DeclarationAssigneeList Equals Expression Semicolon |
             Modifiers QName           DeclarationAssigneeList Semicolon | Modifiers QName           DeclarationAssigneeList Equals Expression Semicolon |
                       QName           DeclarationAssigneeList Semicolon |           QName           DeclarationAssigneeList Equals Expression Semicolon |
             Modifiers NestedQNameList DeclarationAssigneeList Semicolon | Modifiers NestedQNameList DeclarationAssigneeList Equals Expression Semicolon |
                       NestedQNameList DeclarationAssigneeList Semicolon |           NestedQNameList DeclarationAssigneeList Equals Expression Semicolon |
             AssigneeList Equals Expression Semicolon
BreakStatement = BreakKeyword Semicolon | BreakKeyword IntegerLiteral Semicolon
ContinueStatement = ContinueKeyword Semicolon | ContinueKeyword IntegerLiteral Semicolon
IfStatement = IfKeyword Expression Block | IfKeyword Expression Block ElseKeyword Block | IfKeyword Expression Block ElseKeyword IfStatement
PrefixIncDecStatement = DoublePlus Assignee Semicolon | DoubleMinus Assignee Semicolon
ReturnStatement = ReturnKeyword Expression Semicolon | ReturnKeyword Semicolon
ShorthandAssignment = AssigneeList PlusEquals          Expression |
                      AssigneeList MinusEquals         Expression |
                      AssigneeList StarEquals          Expression |
                      AssigneeList ForwardSlashEquals  Expression |
                      AssigneeList PercentEquals       Expression |
                      AssigneeList DoublePercentEquals Expression |
                      AssigneeList DoubleLAngleEquals  Expression |
                      AssigneeList DoubleRAngleEquals  Expression |
                      AssigneeList AmpersandEquals     Expression |
                      AssigneeList PipeEquals          Expression |
                      AssigneeList CaretEquals         Expression
CatchTypeList = Type | CatchTypeList Pipe Type
TryCatchStatement = TryKeyword Block CatchKeyword CatchTypeList Name Block |
                    TryKeyword Block CatchKeyword Modifiers CatchTypeList Name Block |
                    TryCatchStatement CatchKeyword CatchTypeList Name Block |
                    TryCatchStatement CatchKeyword Modifiers CatchTypeList Name Block
TryFinallyStatement = TryKeyword Block FinallyKeyword Block |
                      TryCatchStatement FinallyKeyword Block
WhileStatement = WhileKeyword Expression Block

ForInit = Assignment | ShorthandAssignment Semicolon | Semicolon
ForUpdate = DoublePlus Assignee | DoubleMinus Assignee | AssigneeList Equals Expression | ShorthandAssignment | FunctionCallExpression | epsilon
ForStatement = ForKeyword LParen ForInit Expression Semicolon ForUpdate RParen Block
             | ForKeyword LParen ForInit            Semicolon ForUpdate RParen Block

TypeNoQName = BooleanKeyword |                 QuestionMark BooleanKeyword |
              DoubleKeyword  | FloatKeyword  | QuestionMark DoubleKeyword  | QuestionMark FloatKeyword  |
              ULongKeyword   | LongKeyword   | QuestionMark ULongKeyword   | QuestionMark LongKeyword   |
              UIntKeyword    | IntKeyword    | QuestionMark UIntKeyword    | QuestionMark IntKeyword    |
              UShortKeyword  | ShortKeyword  | QuestionMark UShortKeyword  | QuestionMark ShortKeyword  |
              UByteKeyword   | ByteKeyword   | QuestionMark UByteKeyword   | QuestionMark ByteKeyword   |
              QuestionMark QName | QuestionMark Hash QName | Hash QName |
              LSquare RSquare Type   | QuestionMark LSquare RSquare Type | Hash LSquare RSquare Type   | QuestionMark Hash LSquare RSquare Type |
              LParen TypeListNoQName RParen | QuestionMark LParen TypeListNoQName RParen | QuestionMark NestedQNameList |
              LBrace TypeList      Arrow ReturnType ThrowsClause RBrace | QuestionMark LBrace TypeList      Arrow ReturnType ThrowsClause RBrace |
              LBrace TypeList Hash Arrow ReturnType ThrowsClause RBrace | QuestionMark LBrace TypeList Hash Arrow ReturnType ThrowsClause RBrace |
              LBrace               Arrow ReturnType ThrowsClause RBrace | QuestionMark LBrace               Arrow ReturnType ThrowsClause RBrace |
              LBrace          Hash Arrow ReturnType ThrowsClause RBrace | QuestionMark LBrace          Hash Arrow ReturnType ThrowsClause RBrace |
              ObjectKeyword | QuestionMark ObjectKeyword | Hash ObjectKeyword | QuestionMark Hash ObjectKeyword
TypeList = TypeListNoQName | QNameList
Type = TypeNoQName | QName | NestedQNameList
ReturnType = Type | VoidKeyword
TypeListNoQName = QName           Comma TypeListNoQName |
                  NestedQNameList Comma TypeListNoQName |
                  TypeNoQName     Comma TypeListNoQName |
                  TypeNoQName     Comma QNameList       |
                  TypeNoQName


Expression = TupleExpression | QNameList
TupleExpression = QName             Comma TupleExpression |
                  NestedQNameList   Comma TupleExpression |
                  ExpressionNoTuple Comma TupleExpression |
                  ExpressionNoTuple Comma QNameList       |
                  ExpressionNoTuple
ExpressionNoTuple = LogicalExpression |
                    LogicalExpression QuestionMark Expression Colon ExpressionNoTuple | QNameExpression QuestionMark Expression Colon ExpressionNoTuple |
                    LogicalExpression QuestionMark Expression Colon QNameExpression   | QNameExpression QuestionMark Expression Colon QNameExpression   |
                    LogicalExpression QuestionMarkColon ExpressionNoTuple | QNameExpression QuestionMarkColon ExpressionNoTuple | LogicalExpression QuestionMarkColon QNameExpression | QNameExpression QuestionMarkColon QNameExpression
LogicalExpression = ComparisonExpression |
                    LogicalExpression Ampersand       ComparisonExpression | QNameExpression Ampersand       ComparisonExpression | LogicalExpression Ampersand       QNameExpression | QNameExpression Ampersand       QNameExpression |
                    LogicalExpression Pipe            ComparisonExpression | QNameExpression Pipe            ComparisonExpression | LogicalExpression Pipe            QNameExpression | QNameExpression Pipe            QNameExpression |
                    LogicalExpression Caret           ComparisonExpression | QNameExpression Caret           ComparisonExpression | LogicalExpression Caret           QNameExpression | QNameExpression Caret           QNameExpression |
                    LogicalExpression DoubleAmpersand ComparisonExpression | QNameExpression DoubleAmpersand ComparisonExpression | LogicalExpression DoubleAmpersand QNameExpression | QNameExpression DoubleAmpersand QNameExpression |
                    LogicalExpression DoublePipe      ComparisonExpression | QNameExpression DoublePipe      ComparisonExpression | LogicalExpression DoublePipe      QNameExpression | QNameExpression DoublePipe      QNameExpression
ComparisonExpression = InstanceOfExpression |
                       InstanceOfExpression DoubleEquals          InstanceOfExpression | QNameExpression DoubleEquals          InstanceOfExpression | InstanceOfExpression DoubleEquals          QNameExpression | QNameExpression DoubleEquals          QNameExpression |
                       InstanceOfExpression ExclamationMarkEquals InstanceOfExpression | QNameExpression ExclamationMarkEquals InstanceOfExpression | InstanceOfExpression ExclamationMarkEquals QNameExpression | QNameExpression ExclamationMarkEquals QNameExpression |
                       InstanceOfExpression LAngle                InstanceOfExpression | QNameExpression LAngle                InstanceOfExpression | InstanceOfExpression LAngle                QNameExpression | QNameExpression LAngle                QNameExpression |
                       InstanceOfExpression LAngleEquals          InstanceOfExpression | QNameExpression LAngleEquals          InstanceOfExpression | InstanceOfExpression LAngleEquals          QNameExpression | QNameExpression LAngleEquals          QNameExpression |
                       InstanceOfExpression RAngle                InstanceOfExpression | QNameExpression RAngle                InstanceOfExpression | InstanceOfExpression RAngle                QNameExpression | QNameExpression RAngle                QNameExpression |
                       InstanceOfExpression RAngleEquals          InstanceOfExpression | QNameExpression RAngleEquals          InstanceOfExpression | InstanceOfExpression RAngleEquals          QNameExpression | QNameExpression RAngleEquals          QNameExpression
InstanceOfExpression = AdditiveExpression |
                       InstanceOfExpression InstanceOfKeyword Type |
                       QNameExpression instanceof Type
AdditiveExpression = MultiplicativeExpression |
                     AdditiveExpression Plus  MultiplicativeExpression | QNameExpression Plus  MultiplicativeExpression | AdditiveExpression Plus  QNameExpression | QNameExpression Plus  QNameExpression |
                     AdditiveExpression Minus MultiplicativeExpression | QNameExpression Minus MultiplicativeExpression | AdditiveExpression Minus QNameExpression | QNameExpression Minus QNameExpression
MultiplicativeExpression = ShiftExpression |
                           MultiplicativeExpression Star          ShiftExpression | QNameExpression Star          ShiftExpression | MultiplicativeExpression Star          QNameExpression | QNameExpression Star          QNameExpression |
                           MultiplicativeExpression ForwardSlash  ShiftExpression | QNameExpression ForwardSlash  ShiftExpression | MultiplicativeExpression ForwardSlash  QNameExpression | QNameExpression ForwardSlash  QNameExpression |
                           MultiplicativeExpression Percent       ShiftExpression | QNameExpression Percent       ShiftExpression | MultiplicativeExpression Percent       QNameExpression | QNameExpression Percent       QNameExpression |
                           MultiplicativeExpression DoublePercent ShiftExpression | QNameExpression DoublePercent ShiftExpression | MultiplicativeExpression DoublePercent QNameExpression | QNameExpression DoublePercent QNameExpression
ShiftExpression = TupleIndexExpression |
                  ShiftExpression DoubleLAngle TupleIndexExpression | ShiftExpression DoubleLAngle QNameExpression | QNameExpression DoubleLAngle ShiftExpression | QNameExpression DoubleLAngle QNameExpression |
                  ShiftExpression DoubleRAngle TupleIndexExpression | ShiftExpression DoubleRAngle QNameExpression | QNameExpression DoubleRAngle ShiftExpression | QNameExpression DoubleRAngle QNameExpression
TupleIndexExpression = UnaryExpression | TupleIndexExpression ExclaimationMark IntegerLiteral | QNameExpression ExclaimationMark IntegerLiteral
UnaryExpression = Primary |
                  CastKeyword LAngle Type RAngle UnaryExpression | CastKeyword LAngle Type RAngle QNameExpression |
                  Minus UnaryExpression | Minus QNameExpression |
                  Tilde UnaryExpression | Tilde QNameExpression |
                  ExclaimationMark UnaryExpression | ExclaimationMark QNameExpression
Primary = PrimaryNoThis | ThisKeyword
PrimaryNoThis = BasicPrimary | NewKeyword Dimensions Type
PrimaryNoTrailingType = BasicPrimary | ThisKeyword
BasicPrimary = IntegerLiteral | FloatingLiteral |
               TrueKeyword | FalseKeyword | ThisKeyword | NullKeyword |
               Primary         LSquare Expression RSquare |
               QName           LSquare Expression RSquare |
               NestedQNameList LSquare Expression RSquare |
               NewKeyword LSquare RSquare Type LBrace RBrace |
               NewKeyword LSquare RSquare Type LBrace ExpressionList RBrace |
               PrimaryNoTrailingType Dot Name |
               NestedQNameList Dot Name |
               PrimaryNoTrailingType QuestionMarkDot Name |
               QNameExpression QuestionMarkDot Name |
               Type DoubleColon Name |
               FunctionCallExpression |
               LParen TupleExpression RParen |
               ClassCreationExpression |
               NewKeyword ObjectKeyword Arguments |
               StringLiteral
ClassCreationExpression = NewKeyword QName Arguments
FunctionCallExpression = PrimaryNoThis Arguments | QNameExpression Arguments

ExpressionList = QNameExpression | ExpressionNoTuple | ExpressionList Comma QNameExpression | ExpressionList Comma ExpressionNoTuple
Arguments = LParen ExpressionList RParen | LParen RParen

Dimensions = LSquare Expression RSquare | Dimensions LSquare Expression RSquare


QNameExpression = QName | NestedQNameList
NestedQNameList = LParen QNameList RParen
QNameList = QName |
            NestedQNameList |
            QName Comma QNameList |
            NestedQNameList Comma QNameList

SinceSpecifier = special-cased by the tokenizer, because version numbers are easily confused with floating point numbers
