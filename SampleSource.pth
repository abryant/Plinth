package foo.bar;

import test.*;

compound complex
{
  static final uint test;
  static
  {
    uint x = 2;
    ++x;
    x += test;
    complex::test = 6;
  }

  double real;
  double imag;

  complex()
  {
  }

  complex(double real, double imag)
  {
    this.real, this.imag = real, imag;
  }

  complex mult(complex c)
  {
    return complex(real * c.real - imag * c.imag, real * c.imag + imag * c.real);
  }

  static native uint main(final uint argc)
  {
    stdout::print("Please enter your name: ");
    string line = stdin::readLine();
    // remove the newline
    line = line.substring(0, line.length() - 1);
    stdout::println("Hello, " + line);
    return line.length();
  }

  static []uint map({uint -> uint} f, []uint input)
  {
    []uint result = new [input.length]uint;
    for (uint i = 0; i < input.length; ++i)
    {
      result[i] = f(input[i]);
    }
    return result;
  }

  uint apply({uint -> uint} f, uint arg)
  {
    return f(arg);
  }

  void doStuff()
  {
    // in this context, "Stuff" means "Nothing"
  }

  static uint multiply(uint x)
  {
    return x * 2;
  }
}

class Other
{
  uint x;
  double y;

  Other(uint x)
  {
    this.x, y = x, x;
  }

  uint getX()
  {
    return x;
  }

  void modify()
  {
    ++x;
    ++y;
  }

  uint add(uint x)
  {
    return x + this.x;
  }
}
